

  AccessToken
    √ should auto-generate id
    √ should auto-generate created date
    √ should be validateable
    .findForRequest()
      √ supports two-arg variant with no options

  AccessToken api:loopback:middleware:token(options)
    loopback.token({})
Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token sendRequest get header tokenId expect:
/
authorization
svQCqcUvQ3wRwqtPunI2FnNAN3b1CAKb0rn20N8uLq7Y239DDE03CqBYdxX1hZGa
200

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget tokenOptions:
[object Object]

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget req:
[object Object]

      √ header authorization (125ms)
    options.searchDefaultTokenKeys:[true|false]
      normal usage for options.searchDefaultTokenKeys
Sat, 09 May 2015 10:12:48 GMT loopback:middleware:token FIXME: check that there is a definition for a Token Key, otherwise Warn?
Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token sendRequest get header tokenId expect:
/
authorization
j0NVstqMAOWTWKggVTihQvHF71HJhM770aE0mCkAmUEesp445WQKDBiUbNie6828
200

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget tokenOptions:
[object Object]

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget req:
[object Object]

        √ header, headers has header, searchDefaultTokenKeys is false (46ms)
Sat, 09 May 2015 10:12:48 GMT loopback:middleware:token FIXME: Why not create the DefaultTokenKeys here instead of on each req in tokenIdForRequest
Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token sendRequest get header tokenId expect:
/
authorization
ZNq8Xdrda54Dd9l7s7OS7Bw3i58G1b9OrcrLPFI4VibxykZMJYeLpyEfMGkEcKFz
200

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget tokenOptions:
[object Object]

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget req:
[object Object]

        √ header, headers is empty, searchDefaultTokenKeys is true
      normal usage when not using options.searchDefaultTokenKeys
Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token sendRequest get header tokenId expect:
/
authorization
KkHiJC9Qikx5J9yhqByrEj0rRe1CihMlO1BFvZ772K3WpaLWQPoe9bOBdwfvTzW4
200

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget tokenOptions:
[object Object]

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget req:
[object Object]

        √ header, headers is empty, searchDefaultTokenKeys is undefined
      unnormal usage: for testing purposes, or other strange usages
Sat, 09 May 2015 10:12:48 GMT loopback:middleware:token FIXME: check that there is a definition for a Token Key, otherwise Warn?
Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token sendRequest get header tokenId expect:
/
authorization
GK1iWOxEm0ZNsnV6Ij1sHiLtZogqSNfbAdcHLGyg5t0EOYa4K9bzeyqFQZynNXQE
401

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget tokenOptions:
[object Object]

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appget req:
[object Object]

Sat, 09 May 2015 10:12:48 GMT api:loopback:middleware:token appGet err:
undefined

        √ header, headers is empty, searchDefaultTokenKeys is false

  User
    User.login
      √ Login a user using a custom createAccessToken
      √ Login a user using a custom createAccessToken with options
    ctor
      √ exports default AccessToken model


  12 passing (422ms)

